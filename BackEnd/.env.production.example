# ==============================================================================
# CONFIGURACIÓN DE VARIABLES DE ENTORNO - PRODUCCIÓN
# Sistema de Gestión ECE por Publicaciones
# ==============================================================================
# Copiar este archivo a .env y cambiar los valores según el entorno
# IMPORTANTE: Nunca subir el archivo .env real a control de versiones
# ==============================================================================

# ==============================================================================
# DJANGO SETTINGS
# ==============================================================================
SECRET_KEY=your-secret-key-here-change-in-production
DEBUG=False
ALLOWED_HOSTS=yourdomain.com,www.yourdomain.com,127.0.0.1

# ==============================================================================
# DATABASE CONFIGURATION - USUARIO CON PRIVILEGIOS LIMITADOS
# ==============================================================================
# IMPORTANTE: Usar el usuario ece_app_user creado con el script setup_db_roles.sql
# Este usuario NO tiene privilegios de superusuario/DBA

DB_NAME=publications_db
DB_USER=ece_app_user
DB_PASSWORD=CHANGE_THIS_STRONG_PASSWORD
DB_HOST=localhost
DB_PORT=5432

# ==============================================================================
# DATABASE READONLY USER (para reportes y consultas)
# ==============================================================================
DB_READONLY_USER=ece_readonly_user
DB_READONLY_PASSWORD=CHANGE_THIS_STRONG_PASSWORD

# ==============================================================================
# DATABASE BACKUP USER (para backups automatizados)
# ==============================================================================
DB_BACKUP_USER=ece_backup_user
DB_BACKUP_PASSWORD=CHANGE_THIS_STRONG_PASSWORD

# ==============================================================================
# SECURITY SETTINGS
# ==============================================================================
# Bloqueo de usuario por intentos fallidos
AUTH_LOCKOUT_THRESHOLD=5
AUTH_LOCKOUT_MINUTES=15

# Bloqueo de IP por intentos excesivos
AUTH_IP_LOCKOUT_THRESHOLD=10
AUTH_IP_LOCK_MINUTES=30

# IPs permitidas para acceder al panel de administración (separadas por coma)
ALLOW_ADMIN_IPS=127.0.0.1,::1,192.168.1.100

# ==============================================================================
# EMAIL CONFIGURATION (opcional - para notificaciones)
# ==============================================================================
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=your-email@domain.com
EMAIL_HOST_PASSWORD=your-email-password
DEFAULT_FROM_EMAIL=noreply@domain.com

# ==============================================================================
# CORS SETTINGS
# ==============================================================================
CORS_ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# ==============================================================================
# FILE UPLOAD LIMITS
# ==============================================================================
MAX_UPLOAD_SIZE=52428800  # 50MB en bytes

# ==============================================================================
# SESSION CONFIGURATION
# ==============================================================================
SESSION_COOKIE_AGE=3600  # 1 hora en segundos
SESSION_COOKIE_SECURE=True  # Solo HTTPS en producción
SESSION_COOKIE_HTTPONLY=True
SESSION_COOKIE_SAMESITE=Strict

# ==============================================================================
# CSRF CONFIGURATION
# ==============================================================================
CSRF_COOKIE_SECURE=True  # Solo HTTPS en producción
CSRF_COOKIE_HTTPONLY=True
CSRF_COOKIE_SAMESITE=Strict

# ==============================================================================
# NOTAS IMPORTANTES DE SEGURIDAD
# ==============================================================================
# 1. Generar SECRET_KEY segura:
#    python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
#
# 2. Contraseñas de base de datos:
#    - Mínimo 16 caracteres
#    - Combinación de mayúsculas, minúsculas, números y símbolos
#    - No usar palabras del diccionario
#    - Usar un generador de contraseñas
#
# 3. Después de aplicar setup_db_roles.sql:
#    - Verificar que el usuario ece_app_user NO tiene privilegios de superusuario
#    - Verificar conexión: psql -U ece_app_user -d publications_db -h localhost
#    - Intentar crear base de datos (debería fallar): CREATE DATABASE test;
#
# 4. Configuración de PostgreSQL:
#    - Editar pg_hba.conf para restringir conexiones por IP
#    - Habilitar SSL en postgresql.conf
#    - Configurar firewall para permitir solo IPs específicas
#
# 5. En producción:
#    - Activar HTTPS/SSL
#    - Configurar certificados SSL válidos
#    - Usar reverse proxy (Nginx/Apache)
#    - Implementar rate limiting
#    - Configurar backups automatizados
#
# ==============================================================================
